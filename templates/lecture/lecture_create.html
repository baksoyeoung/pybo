{% extends 'lecture/lecture_base.html' %}
{% block content %}
<div class="row g-5 justify-content-center">
  <div class="col-md-7 col-lg-7">
    <h4 class="mb-3">강의정보입력</h4>
    <form  name="lecture_info" class="needs-validation" novalidate>
      {% csrf_token %}
      <div class="row g-3">
        <div class="col-md-5">
          <label for="season_nm" class="form-label">학기선택</label>
          <select class="form-select" id="season_nm" name="season_nm" required>
            <option>학기선택...</option>
            <option>2022년1학기</option>
          </select>
          <div class="invalid-feedback">
            Please select a valid country.
          </div>
        </div>

        <div class="col-md-5">
          <label for="camp_select" class="form-label">캠퍼스선택</label>
          <select class="form-select" id="camp_select" required>
            <option>캠퍼스선택...</option>
            <option>노형캠퍼스</option>
            <option>이도캠퍼스</option>
          </select>
          <div class="invalid-feedback">
            Please select a valid country.
          </div>
        </div>

        <div class="col-md-5">
          <label for="subject_select" class="form-label">과목선택</label>
          <select class="form-select" id="subject_select" required>
            <option value="">과목선택...</option>
            <option>국어</option>
            <option>영어</option>
            <option>수학</option>
            <option>과학</option>
            <option disabled>-------------------</option>
            <option>인문논술</option>
            <option>수리논술</option>
            <option disabled>-------------------</option>
            <option>입시(자소서,생기부 등)</option>
            <option>특강</option>
            <option disabled>-------------------</option>
            <option>SPEC</option>
            <option>클래스</option>
            <option>클리닉</option>
          </select>
          <div class="invalid-feedback">
            Please select a valid country.
          </div>
        </div>

        <div class="col-md-12">
          <label for="grade_list" class="form-label">대상학년</label>
          <ul class="list-group" id="grade_list">
            <li class="list-group-item">
              <input class="form-check-input" type="checkbox" value="" id="pmiddle1">
              <label class="form-check-label" for="pmiddle1">예비중1</label>
              <input class="form-check-input" type="checkbox" value="" id="pmiddle2">
              <label class="form-check-label" for="pmiddle2">예비중2</label>
              <input class="form-check-input" type="checkbox" value="" id="pmiddle3">
              <label class="form-check-label" for="pmiddle3">예비중3</label>
            </li>
            <li class="list-group-item">
              <input class="form-check-input" type="checkbox" value="" id="middle1">
              <label class="form-check-label" for="middle1">중1</label>
              <input class="form-check-input" type="checkbox" value="" id="middle2">
              <label class="form-check-label" for="middle2">중2</label>
              <input class="form-check-input" type="checkbox" value="" id="middle3">
              <label class="form-check-label" for="middle3">중3</label>
            </li>
            <li class="list-group-item">
              <input class="form-check-input" type="checkbox" value="" id="phigh1">
              <label class="form-check-label" for="phigh1">예비고1</label>
              <input class="form-check-input" type="checkbox" value="" id="phigh2">
              <label class="form-check-label" for="phigh2">예비고2</label>
              <input class="form-check-input" type="checkbox" value="" id="phigh3">
              <label class="form-check-label" for="phigh3">예비고3</label>
            </li>
            <li class="list-group-item">
              <input class="form-check-input" type="checkbox" value="" id="high1">
              <label class="form-check-label" for="high1">고1</label>
              <input class="form-check-input" type="checkbox" value="" id="high2">
              <label class="form-check-label" for="high2">고2</label>
              <input class="form-check-input" type="checkbox" value="" id="high3">
              <label class="form-check-label" for="high3">고3</label>
            </li>
          </ul>
        </div>

        <div class="col-md-5">
          <label for="select_teacher" class="form-label">강사명선택</label>
          <select class="form-select" id="select_teacher" required>
            <option>강사명선택...</option>
            <option>하명래</option>
            <option>조시훈</option>
            <option>위대영</option>
            <option>이진구</option>
          </select>
          <div class="invalid-feedback">
            Please select a valid country.
          </div>
        </div>

        <div class="col-sm-7">
          <label for="lect_name" class="form-label">강의명</label>
          <input type="text" class="form-control" id="lect_name" placeholder="강의명입력" value="" required>
          <div class="invalid-feedback">
            Valid last name is required.
          </div>
        </div>

        <div class="col-sm-12">
          <label for="lect_explan_text" class="form-label">강의설명</label>
          <textarea class="form-control" id="lect_explan_text" rows="3" placeholder="강의에 대한 설명"></textarea>
        </div>

        <div class="buttons">
          <label for="yoiltime" class="form-label">등원 요일/시간</label>
          <ul class="list-group yoiltime" id="yoiltime">
            <li class="list-group-item">
              <input class="form-check-input" type="checkbox" value="" id="timeselect" name="timeselect">
              <label class="form-check-label" for="timeselect">등원시간협의</label>
            </li>
            <li class="list-group-item">
            <select class="yoil" id="yoil" name="yoil">
              <option>요일선택</option>
              <option value="월">월요일</option>
              <option value="화">화요일</option>
              <option value="수">수요일</option>
              <option value="목">목요일</option>
              <option value="금">금요일</option>
              <option value="토">토요일</option>
              <option value="일">일요일</option>
            </select>
            <input type="time" class="time1" id="time1" name="time1" placeholder="시작시간"><span> ~ </span><input type="time" class="time2" id="time2" name="time2"  placeholder="종료시간">
            <input type="button" class="btn btn-primary btn-sm btnAdd" data-bs-toggle="tooltip" data-bs-placement="right" title="Tooltip on right" value="추가">
            </li>
          </ul>
        </div>

        <div class="col-sm-2">
          <label for="week_cnt" class="form-label">시간개수</label>
          <div class="input-group has-validation">
            <input type="number" class="form-control" id="week_cnt" placeholder="숫자만입력" value="" readonly>
            <div class="invalid-feedback">
              Valid last name is required.
            </div>
          </div>
        </div>

        <div class="col-sm-3">
          <label for="week_cnt" class="form-label">수강개수</label>
          <div class="input-group has-validation">
            <input type="number" class="form-control" id="in_cnt" placeholder="숫자만입력" value="">
            <div class="invalid-feedback">
              Valid last name is required.
            </div>
          </div>
        </div>

        <div class="col-sm-3">
          <label for="lect_fee" class="form-label">수강료(원)</label>
          <div class="input-group has-validation">
            <input type="number" class="form-control" id="lect_fee" placeholder="숫자만입력" value="">
            <div class="invalid-feedback">
              Valid last name is required.
            </div>
          </div>
        </div>

        <div class="col-sm-4">
          <label for="lect_fee" class="form-label">수강료추가설명</label>
          <div class="input-group has-validation">
            <textarea class="form-control" id="lect_fee" rows="3" placeholder="추가설명"></textarea>
            <div class="invalid-feedback">
              Valid last name is required.
            </div>
          </div>
        </div>

      <hr class="my-4">

      <button class="w-100 btn btn-primary btn-lg" type="submit">강의등록하기</button>
    </form>
  </div>
</div>
{% endblock %}
{% block script %}
<script>
    $(document).ready(function(){
        $('#week_cnt').val(count_input());
        $('.btnAdd').click (function(){
            $('.yoiltime').append('<li class="list-group-item lecture-time"><select id="yoil" name="yoil"><option>요일선택</option><option value="월">월요일</option><option value="화">화요일</option><option value="수">수요일</option><option value="목">목요일</option><option value="금">금요일</option><option value="토">토요일</option><option value="일">일요일</option></select> <input type="time" class="time1" id="time1" name="time1"><span> ~ </span><input type="time" id="time2" name="time2"> <input type="button" class="btn btn-primary btn-sm btnRemove Remove" value="삭제"></li>'); // end append
            $('#week_cnt').val(count_input());
            $('.btnRemove').on('click', function(){
                $(this).prev().remove (); // remove
                $(this).prev().remove (); // remove
                $(this).prev().remove (); // remove
                $(this).prev().remove (); // remove
                $(this).unwrap();
                $(this).remove(); // remove the button
                $('#week_cnt').val(count_input());
            });
        }); // end click

        function count_input(){
          let length = $('.time1').length;
          return length;
        }

        $(':checkbox[name="timeselect"]').on({
          click: function(e) {
            if($('#timeselect').is(':checked')){
              $('#week_cnt').val(1);
              $('#in_cnt').val('');
              $('.lecture-time').remove();
              $('#in_cnt').prop('readonly', true);
              $('.btnAdd').prop('disabled', true);
              $('.yoil').prop('disabled', true);
              $('.time1').val('');
              $('.time2').val('');
              $('.time1').prop('disabled', true);
              $('.time2').prop('disabled', true);
            }else{
              $('#week_cnt').val(count_input());
              $("#in_cnt" ).prop('readonly', false);
              $('.btnAdd').prop('disabled', false);
              $('.yoil').prop('disabled', false);
              $('.time1').prop('disabled', false);
              $('.time2').prop('disabled', false);
            }
          },
          change: function(e) {

          }
        });

    }); // end ready
</script>
{% endblock %}